"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/geo-ingest/route";
exports.ids = ["app/api/geo-ingest/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "sqlite3":
/*!**************************!*\
  !*** external "sqlite3" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("sqlite3");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgeo-ingest%2Froute&page=%2Fapi%2Fgeo-ingest%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgeo-ingest%2Froute.ts&appDir=%2FUsers%2Fvinaykumar%2FDesktop%2Fdss-atlas-digitalisation%2Fdss-atlas%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fvinaykumar%2FDesktop%2Fdss-atlas-digitalisation%2Fdss-atlas&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgeo-ingest%2Froute&page=%2Fapi%2Fgeo-ingest%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgeo-ingest%2Froute.ts&appDir=%2FUsers%2Fvinaykumar%2FDesktop%2Fdss-atlas-digitalisation%2Fdss-atlas%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fvinaykumar%2FDesktop%2Fdss-atlas-digitalisation%2Fdss-atlas&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_vinaykumar_Desktop_dss_atlas_digitalisation_dss_atlas_app_api_geo_ingest_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/geo-ingest/route.ts */ \"(rsc)/./app/api/geo-ingest/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/geo-ingest/route\",\n        pathname: \"/api/geo-ingest\",\n        filename: \"route\",\n        bundlePath: \"app/api/geo-ingest/route\"\n    },\n    resolvedPagePath: \"/Users/vinaykumar/Desktop/dss-atlas-digitalisation/dss-atlas/app/api/geo-ingest/route.ts\",\n    nextConfigOutput,\n    userland: _Users_vinaykumar_Desktop_dss_atlas_digitalisation_dss_atlas_app_api_geo_ingest_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/geo-ingest/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZnZW8taW5nZXN0JTJGcm91dGUmcGFnZT0lMkZhcGklMkZnZW8taW5nZXN0JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGZ2VvLWluZ2VzdCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnZpbmF5a3VtYXIlMkZEZXNrdG9wJTJGZHNzLWF0bGFzLWRpZ2l0YWxpc2F0aW9uJTJGZHNzLWF0bGFzJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRnZpbmF5a3VtYXIlMkZEZXNrdG9wJTJGZHNzLWF0bGFzLWRpZ2l0YWxpc2F0aW9uJTJGZHNzLWF0bGFzJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUN3QztBQUNySDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2ZyYS1hdGxhcy8/ZTQxYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvdmluYXlrdW1hci9EZXNrdG9wL2Rzcy1hdGxhcy1kaWdpdGFsaXNhdGlvbi9kc3MtYXRsYXMvYXBwL2FwaS9nZW8taW5nZXN0L3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9nZW8taW5nZXN0L3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvZ2VvLWluZ2VzdFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvZ2VvLWluZ2VzdC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy92aW5heWt1bWFyL0Rlc2t0b3AvZHNzLWF0bGFzLWRpZ2l0YWxpc2F0aW9uL2Rzcy1hdGxhcy9hcHAvYXBpL2dlby1pbmdlc3Qvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2dlby1pbmdlc3Qvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgeo-ingest%2Froute&page=%2Fapi%2Fgeo-ingest%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgeo-ingest%2Froute.ts&appDir=%2FUsers%2Fvinaykumar%2FDesktop%2Fdss-atlas-digitalisation%2Fdss-atlas%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fvinaykumar%2FDesktop%2Fdss-atlas-digitalisation%2Fdss-atlas&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/geo-ingest/route.ts":
/*!*************************************!*\
  !*** ./app/api/geo-ingest/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_dbSqlite__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/dbSqlite */ \"(rsc)/./lib/dbSqlite.ts\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_2__);\n// Imported from Multilingual Copy - Data Digitalization Module - Safe Integration\n\n\n\n/**\n * POST /api/geo-ingest\n * Ingest GeoJSON file and save claims to database\n */ async function POST(request) {\n    try {\n        const formData = await request.formData();\n        const file = formData.get(\"file\");\n        const documentType = formData.get(\"document_type\");\n        const uploadedBy = formData.get(\"uploaded_by\");\n        if (!file) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                status: \"error\",\n                message: \"No file provided\"\n            }, {\n                status: 400\n            });\n        }\n        // Validate file type\n        if (!file.name.endsWith(\".geojson\") && !file.name.endsWith(\".json\")) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                status: \"error\",\n                message: \"Invalid file type. Only .geojson or .json files are allowed.\"\n            }, {\n                status: 400\n            });\n        }\n        // Parse GeoJSON file\n        const text = await file.text();\n        let geojsonData;\n        try {\n            geojsonData = JSON.parse(text);\n        } catch (e) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                status: \"error\",\n                message: \"Invalid JSON format\"\n            }, {\n                status: 400\n            });\n        }\n        // Validate GeoJSON structure\n        if (!geojsonData.type || !geojsonData.features) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                status: \"error\",\n                message: \"Invalid GeoJSON structure. Must have type and features.\"\n            }, {\n                status: 400\n            });\n        }\n        const db = await (0,_lib_dbSqlite__WEBPACK_IMPORTED_MODULE_1__.getDb)();\n        const savedClaims = [];\n        const errors = [];\n        // Process each feature\n        for(let i = 0; i < geojsonData.features.length; i++){\n            const feature = geojsonData.features[i];\n            try {\n                // Generate unique claim ID\n                const claimId = feature.properties?.claim_id || `${documentType}-${Date.now()}-${i + 1}`;\n                const dbId = (0,crypto__WEBPACK_IMPORTED_MODULE_2__.randomUUID)();\n                // Validate geometry\n                if (!feature.geometry || !feature.geometry.type || !feature.geometry.coordinates) {\n                    errors.push(`Feature ${i + 1}: Missing or invalid geometry`);\n                    continue;\n                }\n                // Extract properties\n                const confidence = feature.properties?.confidence || feature.properties?.extraction_confidence || 0.5;\n                const flags = feature.properties?.flags || feature.properties?.validation?.flags || [];\n                // Save to database\n                await db.run(`INSERT INTO claims \n                    (id, claim_id, claim_type, geojson, current_flags, current_confidence, saved_by, version, saved_at)\n                    VALUES (?, ?, ?, ?, ?, ?, ?, ?, datetime('now'))`, [\n                    dbId,\n                    claimId,\n                    documentType,\n                    JSON.stringify(feature),\n                    JSON.stringify(flags),\n                    confidence,\n                    uploadedBy || \"system\",\n                    1\n                ]);\n                // Save version\n                const versionId = (0,crypto__WEBPACK_IMPORTED_MODULE_2__.randomUUID)();\n                await db.run(`INSERT INTO claim_versions \n                    (id, claim_db_id, version, geojson, flags, confidence, saved_by, saved_at)\n                    VALUES (?, ?, ?, ?, ?, ?, ?, datetime('now'))`, [\n                    versionId,\n                    dbId,\n                    1,\n                    JSON.stringify(feature),\n                    JSON.stringify(flags),\n                    confidence,\n                    uploadedBy || \"system\"\n                ]);\n                savedClaims.push({\n                    id: dbId,\n                    claim_id: claimId,\n                    claim_type: documentType\n                });\n            } catch (err) {\n                errors.push(`Feature ${i + 1}: ${err.message}`);\n            }\n        }\n        // Calculate summary statistics\n        const totalArea = savedClaims.reduce((sum, claim)=>{\n            const feature = geojsonData.features.find((f)=>(f.properties?.claim_id || `${documentType}-${Date.now()}`) === claim.claim_id);\n            const area = feature?.properties?.area_ha || feature?.properties?.extent_ha || 0;\n            return sum + area;\n        }, 0);\n        const validFeatures = savedClaims.filter((claim)=>{\n            const feature = geojsonData.features.find((f)=>(f.properties?.claim_id || `${documentType}-${Date.now()}`) === claim.claim_id);\n            const confidence = feature?.properties?.confidence || feature?.properties?.extraction_confidence || 0.5;\n            return confidence >= 0.5;\n        }).length;\n        const featuresNeedingReview = savedClaims.filter((claim)=>{\n            const feature = geojsonData.features.find((f)=>(f.properties?.claim_id || `${documentType}-${Date.now()}`) === claim.claim_id);\n            const flags = feature?.properties?.flags || feature?.properties?.validation?.flags || [];\n            return flags.length > 0;\n        }).length;\n        // Prepare features array for frontend with enhanced properties\n        const features = geojsonData.features.map((feature, index)=>{\n            const savedClaim = savedClaims.find((c)=>c.claim_id === (feature.properties?.claim_id || `${documentType}-${Date.now()}-${index + 1}`));\n            return {\n                ...feature,\n                properties: {\n                    ...feature.properties,\n                    claim_id: savedClaim?.claim_id || feature.properties?.claim_id || `${documentType}-${Date.now()}-${index + 1}`,\n                    claim_type: documentType,\n                    confidence: feature.properties?.confidence || feature.properties?.extraction_confidence || 0.5,\n                    flags: feature.properties?.flags || feature.properties?.validation?.flags || [],\n                    db_id: savedClaim?.id,\n                    saved: !!savedClaim\n                }\n            };\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            status: \"success\",\n            message: `Successfully ingested ${savedClaims.length} claims`,\n            summary: {\n                total_features: geojsonData.features.length,\n                valid_features: validFeatures,\n                features_needing_review: featuresNeedingReview,\n                total_area_ha: totalArea\n            },\n            features: features,\n            saved_claims: savedClaims,\n            errors: errors.length > 0 ? errors : undefined,\n            successful: savedClaims.length,\n            failed: errors.length\n        });\n    } catch (error) {\n        console.error(\"Error ingesting GeoJSON:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            status: \"error\",\n            message: \"Failed to ingest GeoJSON\",\n            details: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LGNBQWNWLFFBQVFFLFVBQVUsRUFBRVMseUJBQXlCO29CQUMzRkMsT0FBT1osUUFBUUUsVUFBVSxFQUFFVSxTQUFTWixRQUFRRSxVQUFVLEVBQUVXLFlBQVlELFNBQVMsRUFBRTtvQkFDL0V3QixPQUFPRixZQUFZakI7b0JBQ25Cb0IsT0FBTyxDQUFDLENBQUNIO2dCQUNiO1lBQ0o7UUFDSjtRQUVBLE9BQU83RCxxREFBWUEsQ0FBQ1UsSUFBSSxDQUFDO1lBQ3JCQyxRQUFRO1lBQ1JDLFNBQVMsQ0FBQyxzQkFBc0IsRUFBRVcsWUFBWUcsTUFBTSxDQUFDLE9BQU8sQ0FBQztZQUM3RHVDLFNBQVM7Z0JBQ0xDLGdCQUFnQmxELFlBQVlLLFFBQVEsQ0FBQ0ssTUFBTTtnQkFDM0N5QyxnQkFBZ0JYO2dCQUNoQlkseUJBQXlCVjtnQkFDekJXLGVBQWV0QjtZQUNuQjtZQUNBMUIsVUFBVUE7WUFDVmlELGNBQWMvQztZQUNkQyxRQUFRQSxPQUFPRSxNQUFNLEdBQUcsSUFBSUYsU0FBUytDO1lBQ3JDQyxZQUFZakQsWUFBWUcsTUFBTTtZQUM5QitDLFFBQVFqRCxPQUFPRSxNQUFNO1FBQ3pCO0lBRUosRUFBRSxPQUFPZ0QsT0FBWTtRQUNqQkMsUUFBUUQsS0FBSyxDQUFDLDRCQUE0QkE7UUFDMUMsT0FBTzFFLHFEQUFZQSxDQUFDVSxJQUFJLENBQUM7WUFDckJDLFFBQVE7WUFDUkMsU0FBUztZQUNUZ0UsU0FBU0YsTUFBTTlELE9BQU87UUFDMUIsR0FBRztZQUFFRCxRQUFRO1FBQUk7SUFDckI7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2ZyYS1hdGxhcy8uL2FwcC9hcGkvZ2VvLWluZ2VzdC9yb3V0ZS50cz9jZGY2Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIEltcG9ydGVkIGZyb20gTXVsdGlsaW5ndWFsIENvcHkgLSBEYXRhIERpZ2l0YWxpemF0aW9uIE1vZHVsZSAtIFNhZmUgSW50ZWdyYXRpb25cbmltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBnZXREYiB9IGZyb20gJ0AvbGliL2RiU3FsaXRlJztcbmltcG9ydCB7IHJhbmRvbVVVSUQgfSBmcm9tICdjcnlwdG8nO1xuXG4vKipcbiAqIFBPU1QgL2FwaS9nZW8taW5nZXN0XG4gKiBJbmdlc3QgR2VvSlNPTiBmaWxlIGFuZCBzYXZlIGNsYWltcyB0byBkYXRhYmFzZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGZvcm1EYXRhID0gYXdhaXQgcmVxdWVzdC5mb3JtRGF0YSgpO1xuICAgICAgICBjb25zdCBmaWxlID0gZm9ybURhdGEuZ2V0KCdmaWxlJykgYXMgRmlsZTtcbiAgICAgICAgY29uc3QgZG9jdW1lbnRUeXBlID0gZm9ybURhdGEuZ2V0KCdkb2N1bWVudF90eXBlJykgYXMgc3RyaW5nO1xuICAgICAgICBjb25zdCB1cGxvYWRlZEJ5ID0gZm9ybURhdGEuZ2V0KCd1cGxvYWRlZF9ieScpIGFzIHN0cmluZztcblxuICAgICAgICBpZiAoIWZpbGUpIHtcbiAgICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdObyBmaWxlIHByb3ZpZGVkJ1xuICAgICAgICAgICAgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFZhbGlkYXRlIGZpbGUgdHlwZVxuICAgICAgICBpZiAoIWZpbGUubmFtZS5lbmRzV2l0aCgnLmdlb2pzb24nKSAmJiAhZmlsZS5uYW1lLmVuZHNXaXRoKCcuanNvbicpKSB7XG4gICAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICAgICAgICAgIHN0YXR1czogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBmaWxlIHR5cGUuIE9ubHkgLmdlb2pzb24gb3IgLmpzb24gZmlsZXMgYXJlIGFsbG93ZWQuJ1xuICAgICAgICAgICAgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFBhcnNlIEdlb0pTT04gZmlsZVxuICAgICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgZmlsZS50ZXh0KCk7XG4gICAgICAgIGxldCBnZW9qc29uRGF0YTogYW55O1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBnZW9qc29uRGF0YSA9IEpTT04ucGFyc2UodGV4dCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIEpTT04gZm9ybWF0J1xuICAgICAgICAgICAgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFZhbGlkYXRlIEdlb0pTT04gc3RydWN0dXJlXG4gICAgICAgIGlmICghZ2VvanNvbkRhdGEudHlwZSB8fCAhZ2VvanNvbkRhdGEuZmVhdHVyZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIEdlb0pTT04gc3RydWN0dXJlLiBNdXN0IGhhdmUgdHlwZSBhbmQgZmVhdHVyZXMuJ1xuICAgICAgICAgICAgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGIoKTtcbiAgICAgICAgY29uc3Qgc2F2ZWRDbGFpbXM6IGFueVtdID0gW107XG4gICAgICAgIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXTtcblxuICAgICAgICAvLyBQcm9jZXNzIGVhY2ggZmVhdHVyZVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdlb2pzb25EYXRhLmZlYXR1cmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBmZWF0dXJlID0gZ2VvanNvbkRhdGEuZmVhdHVyZXNbaV07XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gR2VuZXJhdGUgdW5pcXVlIGNsYWltIElEXG4gICAgICAgICAgICAgICAgY29uc3QgY2xhaW1JZCA9IGZlYXR1cmUucHJvcGVydGllcz8uY2xhaW1faWQgfHwgYCR7ZG9jdW1lbnRUeXBlfS0ke0RhdGUubm93KCl9LSR7aSArIDF9YDtcbiAgICAgICAgICAgICAgICBjb25zdCBkYklkID0gcmFuZG9tVVVJRCgpO1xuXG4gICAgICAgICAgICAgICAgLy8gVmFsaWRhdGUgZ2VvbWV0cnlcbiAgICAgICAgICAgICAgICBpZiAoIWZlYXR1cmUuZ2VvbWV0cnkgfHwgIWZlYXR1cmUuZ2VvbWV0cnkudHlwZSB8fCAhZmVhdHVyZS5nZW9tZXRyeS5jb29yZGluYXRlcykge1xuICAgICAgICAgICAgICAgICAgICBlcnJvcnMucHVzaChgRmVhdHVyZSAke2kgKyAxfTogTWlzc2luZyBvciBpbnZhbGlkIGdlb21ldHJ5YCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIEV4dHJhY3QgcHJvcGVydGllc1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbmZpZGVuY2UgPSBmZWF0dXJlLnByb3BlcnRpZXM/LmNvbmZpZGVuY2UgfHwgZmVhdHVyZS5wcm9wZXJ0aWVzPy5leHRyYWN0aW9uX2NvbmZpZGVuY2UgfHwgMC41O1xuICAgICAgICAgICAgICAgIGNvbnN0IGZsYWdzID0gZmVhdHVyZS5wcm9wZXJ0aWVzPy5mbGFncyB8fCBmZWF0dXJlLnByb3BlcnRpZXM/LnZhbGlkYXRpb24/LmZsYWdzIHx8IFtdO1xuXG4gICAgICAgICAgICAgICAgLy8gU2F2ZSB0byBkYXRhYmFzZVxuICAgICAgICAgICAgICAgIGF3YWl0IGRiLnJ1bihcbiAgICAgICAgICAgICAgICAgICAgYElOU0VSVCBJTlRPIGNsYWltcyBcbiAgICAgICAgICAgICAgICAgICAgKGlkLCBjbGFpbV9pZCwgY2xhaW1fdHlwZSwgZ2VvanNvbiwgY3VycmVudF9mbGFncywgY3VycmVudF9jb25maWRlbmNlLCBzYXZlZF9ieSwgdmVyc2lvbiwgc2F2ZWRfYXQpXG4gICAgICAgICAgICAgICAgICAgIFZBTFVFUyAoPywgPywgPywgPywgPywgPywgPywgPywgZGF0ZXRpbWUoJ25vdycpKWAsXG4gICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFpbUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoZmVhdHVyZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShmbGFncyksXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWRlbmNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdXBsb2FkZWRCeSB8fCAnc3lzdGVtJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIDFcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAvLyBTYXZlIHZlcnNpb25cbiAgICAgICAgICAgICAgICBjb25zdCB2ZXJzaW9uSWQgPSByYW5kb21VVUlEKCk7XG4gICAgICAgICAgICAgICAgYXdhaXQgZGIucnVuKFxuICAgICAgICAgICAgICAgICAgICBgSU5TRVJUIElOVE8gY2xhaW1fdmVyc2lvbnMgXG4gICAgICAgICAgICAgICAgICAgIChpZCwgY2xhaW1fZGJfaWQsIHZlcnNpb24sIGdlb2pzb24sIGZsYWdzLCBjb25maWRlbmNlLCBzYXZlZF9ieSwgc2F2ZWRfYXQpXG4gICAgICAgICAgICAgICAgICAgIFZBTFVFUyAoPywgPywgPywgPywgPywgPywgPywgZGF0ZXRpbWUoJ25vdycpKWAsXG4gICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNpb25JZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoZmVhdHVyZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShmbGFncyksXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWRlbmNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdXBsb2FkZWRCeSB8fCAnc3lzdGVtJ1xuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIHNhdmVkQ2xhaW1zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBpZDogZGJJZCxcbiAgICAgICAgICAgICAgICAgICAgY2xhaW1faWQ6IGNsYWltSWQsXG4gICAgICAgICAgICAgICAgICAgIGNsYWltX3R5cGU6IGRvY3VtZW50VHlwZVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKGBGZWF0dXJlICR7aSArIDF9OiAke2Vyci5tZXNzYWdlfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2FsY3VsYXRlIHN1bW1hcnkgc3RhdGlzdGljc1xuICAgICAgICBjb25zdCB0b3RhbEFyZWEgPSBzYXZlZENsYWltcy5yZWR1Y2UoKHN1bSwgY2xhaW0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZlYXR1cmUgPSBnZW9qc29uRGF0YS5mZWF0dXJlcy5maW5kKChmOiBhbnkpID0+XG4gICAgICAgICAgICAgICAgKGYucHJvcGVydGllcz8uY2xhaW1faWQgfHwgYCR7ZG9jdW1lbnRUeXBlfS0ke0RhdGUubm93KCl9YCkgPT09IGNsYWltLmNsYWltX2lkXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY29uc3QgYXJlYSA9IGZlYXR1cmU/LnByb3BlcnRpZXM/LmFyZWFfaGEgfHwgZmVhdHVyZT8ucHJvcGVydGllcz8uZXh0ZW50X2hhIHx8IDA7XG4gICAgICAgICAgICByZXR1cm4gc3VtICsgYXJlYTtcbiAgICAgICAgfSwgMCk7XG5cbiAgICAgICAgY29uc3QgdmFsaWRGZWF0dXJlcyA9IHNhdmVkQ2xhaW1zLmZpbHRlcihjbGFpbSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmZWF0dXJlID0gZ2VvanNvbkRhdGEuZmVhdHVyZXMuZmluZCgoZjogYW55KSA9PlxuICAgICAgICAgICAgICAgIChmLnByb3BlcnRpZXM/LmNsYWltX2lkIHx8IGAke2RvY3VtZW50VHlwZX0tJHtEYXRlLm5vdygpfWApID09PSBjbGFpbS5jbGFpbV9pZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpZGVuY2UgPSBmZWF0dXJlPy5wcm9wZXJ0aWVzPy5jb25maWRlbmNlIHx8IGZlYXR1cmU/LnByb3BlcnRpZXM/LmV4dHJhY3Rpb25fY29uZmlkZW5jZSB8fCAwLjU7XG4gICAgICAgICAgICByZXR1cm4gY29uZmlkZW5jZSA+PSAwLjU7XG4gICAgICAgIH0pLmxlbmd0aDtcblxuICAgICAgICBjb25zdCBmZWF0dXJlc05lZWRpbmdSZXZpZXcgPSBzYXZlZENsYWltcy5maWx0ZXIoY2xhaW0gPT4ge1xuICAgICAgICAgICAgY29uc3QgZmVhdHVyZSA9IGdlb2pzb25EYXRhLmZlYXR1cmVzLmZpbmQoKGY6IGFueSkgPT5cbiAgICAgICAgICAgICAgICAoZi5wcm9wZXJ0aWVzPy5jbGFpbV9pZCB8fCBgJHtkb2N1bWVudFR5cGV9LSR7RGF0ZS5ub3coKX1gKSA9PT0gY2xhaW0uY2xhaW1faWRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCBmbGFncyA9IGZlYXR1cmU/LnByb3BlcnRpZXM/LmZsYWdzIHx8IGZlYXR1cmU/LnByb3BlcnRpZXM/LnZhbGlkYXRpb24/LmZsYWdzIHx8IFtdO1xuICAgICAgICAgICAgcmV0dXJuIGZsYWdzLmxlbmd0aCA+IDA7XG4gICAgICAgIH0pLmxlbmd0aDtcblxuICAgICAgICAvLyBQcmVwYXJlIGZlYXR1cmVzIGFycmF5IGZvciBmcm9udGVuZCB3aXRoIGVuaGFuY2VkIHByb3BlcnRpZXNcbiAgICAgICAgY29uc3QgZmVhdHVyZXMgPSBnZW9qc29uRGF0YS5mZWF0dXJlcy5tYXAoKGZlYXR1cmU6IGFueSwgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2F2ZWRDbGFpbSA9IHNhdmVkQ2xhaW1zLmZpbmQoYyA9PiBjLmNsYWltX2lkID09PSAoZmVhdHVyZS5wcm9wZXJ0aWVzPy5jbGFpbV9pZCB8fCBgJHtkb2N1bWVudFR5cGV9LSR7RGF0ZS5ub3coKX0tJHtpbmRleCArIDF9YCkpO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLmZlYXR1cmUsXG4gICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICAuLi5mZWF0dXJlLnByb3BlcnRpZXMsXG4gICAgICAgICAgICAgICAgICAgIGNsYWltX2lkOiBzYXZlZENsYWltPy5jbGFpbV9pZCB8fCBmZWF0dXJlLnByb3BlcnRpZXM/LmNsYWltX2lkIHx8IGAke2RvY3VtZW50VHlwZX0tJHtEYXRlLm5vdygpfS0ke2luZGV4ICsgMX1gLFxuICAgICAgICAgICAgICAgICAgICBjbGFpbV90eXBlOiBkb2N1bWVudFR5cGUsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZGVuY2U6IGZlYXR1cmUucHJvcGVydGllcz8uY29uZmlkZW5jZSB8fCBmZWF0dXJlLnByb3BlcnRpZXM/LmV4dHJhY3Rpb25fY29uZmlkZW5jZSB8fCAwLjUsXG4gICAgICAgICAgICAgICAgICAgIGZsYWdzOiBmZWF0dXJlLnByb3BlcnRpZXM/LmZsYWdzIHx8IGZlYXR1cmUucHJvcGVydGllcz8udmFsaWRhdGlvbj8uZmxhZ3MgfHwgW10sXG4gICAgICAgICAgICAgICAgICAgIGRiX2lkOiBzYXZlZENsYWltPy5pZCxcbiAgICAgICAgICAgICAgICAgICAgc2F2ZWQ6ICEhc2F2ZWRDbGFpbVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBTdWNjZXNzZnVsbHkgaW5nZXN0ZWQgJHtzYXZlZENsYWltcy5sZW5ndGh9IGNsYWltc2AsXG4gICAgICAgICAgICBzdW1tYXJ5OiB7XG4gICAgICAgICAgICAgICAgdG90YWxfZmVhdHVyZXM6IGdlb2pzb25EYXRhLmZlYXR1cmVzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICB2YWxpZF9mZWF0dXJlczogdmFsaWRGZWF0dXJlcyxcbiAgICAgICAgICAgICAgICBmZWF0dXJlc19uZWVkaW5nX3JldmlldzogZmVhdHVyZXNOZWVkaW5nUmV2aWV3LFxuICAgICAgICAgICAgICAgIHRvdGFsX2FyZWFfaGE6IHRvdGFsQXJlYVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZlYXR1cmVzOiBmZWF0dXJlcyxcbiAgICAgICAgICAgIHNhdmVkX2NsYWltczogc2F2ZWRDbGFpbXMsXG4gICAgICAgICAgICBlcnJvcnM6IGVycm9ycy5sZW5ndGggPiAwID8gZXJyb3JzIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgc3VjY2Vzc2Z1bDogc2F2ZWRDbGFpbXMubGVuZ3RoLFxuICAgICAgICAgICAgZmFpbGVkOiBlcnJvcnMubGVuZ3RoXG4gICAgICAgIH0pO1xuXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbmdlc3RpbmcgR2VvSlNPTjonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgICBzdGF0dXM6ICdlcnJvcicsXG4gICAgICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGluZ2VzdCBHZW9KU09OJyxcbiAgICAgICAgICAgIGRldGFpbHM6IGVycm9yLm1lc3NhZ2VcbiAgICAgICAgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZ2V0RGIiLCJyYW5kb21VVUlEIiwiUE9TVCIsInJlcXVlc3QiLCJmb3JtRGF0YSIsImZpbGUiLCJnZXQiLCJkb2N1bWVudFR5cGUiLCJ1cGxvYWRlZEJ5IiwianNvbiIsInN0YXR1cyIsIm1lc3NhZ2UiLCJuYW1lIiwiZW5kc1dpdGgiLCJ0ZXh0IiwiZ2VvanNvbkRhdGEiLCJKU09OIiwicGFyc2UiLCJlIiwidHlwZSIsImZlYXR1cmVzIiwiZGIiLCJzYXZlZENsYWltcyIsImVycm9ycyIsImkiLCJsZW5ndGgiLCJmZWF0dXJlIiwiY2xhaW1JZCIsInByb3BlcnRpZXMiLCJjbGFpbV9pZCIsIkRhdGUiLCJub3ciLCJkYklkIiwiZ2VvbWV0cnkiLCJjb29yZGluYXRlcyIsInB1c2giLCJjb25maWRlbmNlIiwiZXh0cmFjdGlvbl9jb25maWRlbmNlIiwiZmxhZ3MiLCJ2YWxpZGF0aW9uIiwicnVuIiwic3RyaW5naWZ5IiwidmVyc2lvbklkIiwiaWQiLCJjbGFpbV90eXBlIiwiZXJyIiwidG90YWxBcmVhIiwicmVkdWNlIiwic3VtIiwiY2xhaW0iLCJmaW5kIiwiZiIsImFyZWEiLCJhcmVhX2hhIiwiZXh0ZW50X2hhIiwidmFsaWRGZWF0dXJlcyIsImZpbHRlciIsImZlYXR1cmVzTmVlZGluZ1JldmlldyIsIm1hcCIsImluZGV4Iiwic2F2ZWRDbGFpbSIsImMiLCJkYl9pZCIsInNhdmVkIiwic3VtbWFyeSIsInRvdGFsX2ZlYXR1cmVzIiwidmFsaWRfZmVhdHVyZXMiLCJmZWF0dXJlc19uZWVkaW5nX3JldmlldyIsInRvdGFsX2FyZWFfaGEiLCJzYXZlZF9jbGFpbXMiLCJ1bmRlZmluZWQiLCJzdWNjZXNzZnVsIiwiZmFpbGVkIiwiZXJyb3IiLCJjb25zb2xlIiwiZGV0YWlscyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/geo-ingest/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/dbSqlite.ts":
/*!*************************!*\
  !*** ./lib/dbSqlite.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   closeDb: () => (/* binding */ closeDb),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   ensureAdminPassword: () => (/* binding */ ensureAdminPassword),\n/* harmony export */   getDb: () => (/* binding */ getDb),\n/* harmony export */   query: () => (/* binding */ query)\n/* harmony export */ });\n/* harmony import */ var sqlite3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! sqlite3 */ \"sqlite3\");\n/* harmony import */ var sqlite3__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(sqlite3__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var sqlite__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! sqlite */ \"(rsc)/./node_modules/sqlite/build/index.mjs\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n// Imported from Multilingual Copy - Data Digitalization Module - Safe Integration\n\n\n\n\n// Database configuration\nconst dbPath = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \"fra_atlas.db\");\nlet dbInstance = null;\n/**\n * Get database connection\n */ async function getDb() {\n    if (dbInstance) {\n        return dbInstance;\n    }\n    dbInstance = await (0,sqlite__WEBPACK_IMPORTED_MODULE_1__.open)({\n        filename: dbPath,\n        driver: (sqlite3__WEBPACK_IMPORTED_MODULE_0___default().Database)\n    });\n    // Enable foreign keys and WAL mode for better concurrency\n    await dbInstance.run(\"PRAGMA foreign_keys = ON\");\n    await dbInstance.run(\"PRAGMA journal_mode = WAL\");\n    await dbInstance.run(\"PRAGMA busy_timeout = 5000\");\n    // Ensure admin table exists\n    await dbInstance.run(`\n        CREATE TABLE IF NOT EXISTS admin (\n            id INTEGER PRIMARY KEY AUTOINCREMENT,\n            hashed_password TEXT NOT NULL,\n            created_at TEXT,\n            updated_at TEXT\n        )\n    `);\n    // Ensure claims table exists\n    await dbInstance.run(`\n        CREATE TABLE IF NOT EXISTS claims (\n            id TEXT PRIMARY KEY,\n            claim_id TEXT UNIQUE NOT NULL,\n            claim_type TEXT NOT NULL,\n            geojson TEXT NOT NULL,\n            current_flags TEXT,\n            current_confidence REAL,\n            saved_by TEXT,\n            version INTEGER DEFAULT 1,\n            saved_at TEXT\n        )\n    `);\n    // Ensure claim_versions table exists\n    await dbInstance.run(`\n        CREATE TABLE IF NOT EXISTS claim_versions (\n            id TEXT PRIMARY KEY,\n            claim_db_id TEXT NOT NULL,\n            version INTEGER NOT NULL,\n            geojson TEXT NOT NULL,\n            flags TEXT,\n            confidence REAL,\n            saved_by TEXT,\n            saved_at TEXT,\n            FOREIGN KEY (claim_db_id) REFERENCES claims(id)\n        )\n    `);\n    // Ensure audit_log table exists\n    await dbInstance.run(`\n        CREATE TABLE IF NOT EXISTS audit_log (\n            id TEXT PRIMARY KEY,\n            action TEXT NOT NULL,\n            user_identifier TEXT,\n            ip_address TEXT,\n            success INTEGER,\n            details TEXT,\n            created_at TEXT\n        )\n    `);\n    // Ensure an admin record exists with a default password if none set\n    await ensureAdminPassword();\n    return dbInstance;\n}\n/**\n * Execute a query with parameters (SQLite version)\n */ async function query(text, params) {\n    const db = await getDb();\n    try {\n        const rows = await db.all(text, params || []);\n        return {\n            rows\n        };\n    } catch (error) {\n        console.error(\"SQLite query error:\", error);\n        throw error;\n    }\n}\n/**\n * Close database connection\n */ async function closeDb() {\n    if (dbInstance) {\n        await dbInstance.close();\n        dbInstance = null;\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    getDb,\n    query,\n    closeDb,\n    ensureAdminPassword\n});\n/**\n * Ensure there is at least one admin entry with a default password.\n * This runs on server start. If an admin already exists, it does nothing.\n */ async function ensureAdminPassword() {\n    const db = await getDb();\n    const result = await db.get(\"SELECT COUNT(*) as count FROM admin\");\n    if (result?.count === 0) {\n        const defaultPassword = \"admin123\"; // you can change this later\n        const hashed = await bcryptjs__WEBPACK_IMPORTED_MODULE_3__[\"default\"].hash(defaultPassword, 12);\n        await db.run('INSERT INTO admin (hashed_password, created_at, updated_at) VALUES (?, datetime(\"now\"), datetime(\"now\"))', [\n            hashed\n        ]);\n        console.log('âœ… Default admin password set to \"admin123\"');\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGJTcWxpdGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBQSxrRkFBa0Y7QUFDcEQ7QUFDVTtBQUNoQjtBQUNNO0FBRTlCLHlCQUF5QjtBQUN6QixNQUFNSSxTQUFTRixnREFBUyxDQUFDSSxRQUFRQyxHQUFHLElBQUk7QUFFeEMsSUFBSUMsYUFBOEI7QUFFbEM7O0NBRUMsR0FDTSxlQUFlQztJQUNsQixJQUFJRCxZQUFZO1FBQ1osT0FBT0E7SUFDWDtJQUVBQSxhQUFhLE1BQU1QLDRDQUFJQSxDQUFDO1FBQ3BCUyxVQUFVTjtRQUNWTyxRQUFRWCx5REFBZ0I7SUFDNUI7SUFFQSwwREFBMEQ7SUFDMUQsTUFBTVEsV0FBV0ssR0FBRyxDQUFDO0lBQ3JCLE1BQU1MLFdBQVdLLEdBQUcsQ0FBQztJQUNyQixNQUFNTCxXQUFXSyxHQUFHLENBQUM7SUFFckIsNEJBQTRCO0lBQzVCLE1BQU1MLFdBQVdLLEdBQUcsQ0FBQyxDQUFDOzs7Ozs7O0lBT3RCLENBQUM7SUFFRCw2QkFBNkI7SUFDN0IsTUFBTUwsV0FBV0ssR0FBRyxDQUFDLENBQUM7Ozs7Ozs7Ozs7OztJQVl0QixDQUFDO0lBRUQscUNBQXFDO0lBQ3JDLE1BQU1MLFdBQVdLLEdBQUcsQ0FBQyxDQUFDOzs7Ozs7Ozs7Ozs7SUFZdEIsQ0FBQztJQUVELGdDQUFnQztJQUNoQyxNQUFNTCxXQUFXSyxHQUFHLENBQUMsQ0FBQzs7Ozs7Ozs7OztJQVV0QixDQUFDO0lBRUQsb0VBQW9FO0lBQ3BFLE1BQU1DO0lBQ04sT0FBT047QUFDWDtBQUVBOztDQUVDLEdBQ00sZUFBZU8sTUFDbEJDLElBQVksRUFDWkMsTUFBYztJQUVkLE1BQU1DLEtBQUssTUFBTVQ7SUFFakIsSUFBSTtRQUNBLE1BQU1VLE9BQU8sTUFBTUQsR0FBR0UsR0FBRyxDQUFDSixNQUFNQyxVQUFVLEVBQUU7UUFDNUMsT0FBTztZQUFFRTtRQUFLO0lBQ2xCLEVBQUUsT0FBT0UsT0FBTztRQUNaQyxRQUFRRCxLQUFLLENBQUMsdUJBQXVCQTtRQUNyQyxNQUFNQTtJQUNWO0FBQ0o7QUFFQTs7Q0FFQyxHQUNNLGVBQWVFO0lBQ2xCLElBQUlmLFlBQVk7UUFDWixNQUFNQSxXQUFXZ0IsS0FBSztRQUN0QmhCLGFBQWE7SUFDakI7QUFDSjtBQUVBLGlFQUFlO0lBQ1hDO0lBQ0FNO0lBQ0FRO0lBQ0FUO0FBQ0osQ0FBQyxFQUFDO0FBRUY7OztDQUdDLEdBQ00sZUFBZUE7SUFDbEIsTUFBTUksS0FBSyxNQUFNVDtJQUNqQixNQUFNZ0IsU0FBUyxNQUFNUCxHQUFHUSxHQUFHLENBQUM7SUFDNUIsSUFBSUQsUUFBUUUsVUFBVSxHQUFHO1FBQ3JCLE1BQU1DLGtCQUFrQixZQUFZLDRCQUE0QjtRQUNoRSxNQUFNQyxTQUFTLE1BQU0xQixxREFBVyxDQUFDeUIsaUJBQWlCO1FBQ2xELE1BQU1WLEdBQUdMLEdBQUcsQ0FBQyw0R0FBNEc7WUFBQ2dCO1NBQU87UUFDaklQLFFBQVFTLEdBQUcsQ0FBQztJQUNoQjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJhLWF0bGFzLy4vbGliL2RiU3FsaXRlLnRzP2FlYzIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gSW1wb3J0ZWQgZnJvbSBNdWx0aWxpbmd1YWwgQ29weSAtIERhdGEgRGlnaXRhbGl6YXRpb24gTW9kdWxlIC0gU2FmZSBJbnRlZ3JhdGlvblxuaW1wb3J0IHNxbGl0ZTMgZnJvbSAnc3FsaXRlMyc7XG5pbXBvcnQgeyBvcGVuLCBEYXRhYmFzZSB9IGZyb20gJ3NxbGl0ZSc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0anMnO1xuXG4vLyBEYXRhYmFzZSBjb25maWd1cmF0aW9uXG5jb25zdCBkYlBhdGggPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ2ZyYV9hdGxhcy5kYicpO1xuXG5sZXQgZGJJbnN0YW5jZTogRGF0YWJhc2UgfCBudWxsID0gbnVsbDtcblxuLyoqXG4gKiBHZXQgZGF0YWJhc2UgY29ubmVjdGlvblxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RGIoKTogUHJvbWlzZTxEYXRhYmFzZT4ge1xuICAgIGlmIChkYkluc3RhbmNlKSB7XG4gICAgICAgIHJldHVybiBkYkluc3RhbmNlO1xuICAgIH1cblxuICAgIGRiSW5zdGFuY2UgPSBhd2FpdCBvcGVuKHtcbiAgICAgICAgZmlsZW5hbWU6IGRiUGF0aCxcbiAgICAgICAgZHJpdmVyOiBzcWxpdGUzLkRhdGFiYXNlXG4gICAgfSk7XG5cbiAgICAvLyBFbmFibGUgZm9yZWlnbiBrZXlzIGFuZCBXQUwgbW9kZSBmb3IgYmV0dGVyIGNvbmN1cnJlbmN5XG4gICAgYXdhaXQgZGJJbnN0YW5jZS5ydW4oJ1BSQUdNQSBmb3JlaWduX2tleXMgPSBPTicpO1xuICAgIGF3YWl0IGRiSW5zdGFuY2UucnVuKCdQUkFHTUEgam91cm5hbF9tb2RlID0gV0FMJyk7XG4gICAgYXdhaXQgZGJJbnN0YW5jZS5ydW4oJ1BSQUdNQSBidXN5X3RpbWVvdXQgPSA1MDAwJyk7XG5cbiAgICAvLyBFbnN1cmUgYWRtaW4gdGFibGUgZXhpc3RzXG4gICAgYXdhaXQgZGJJbnN0YW5jZS5ydW4oYFxuICAgICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBhZG1pbiAoXG4gICAgICAgICAgICBpZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsXG4gICAgICAgICAgICBoYXNoZWRfcGFzc3dvcmQgVEVYVCBOT1QgTlVMTCxcbiAgICAgICAgICAgIGNyZWF0ZWRfYXQgVEVYVCxcbiAgICAgICAgICAgIHVwZGF0ZWRfYXQgVEVYVFxuICAgICAgICApXG4gICAgYCk7XG5cbiAgICAvLyBFbnN1cmUgY2xhaW1zIHRhYmxlIGV4aXN0c1xuICAgIGF3YWl0IGRiSW5zdGFuY2UucnVuKGBcbiAgICAgICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgY2xhaW1zIChcbiAgICAgICAgICAgIGlkIFRFWFQgUFJJTUFSWSBLRVksXG4gICAgICAgICAgICBjbGFpbV9pZCBURVhUIFVOSVFVRSBOT1QgTlVMTCxcbiAgICAgICAgICAgIGNsYWltX3R5cGUgVEVYVCBOT1QgTlVMTCxcbiAgICAgICAgICAgIGdlb2pzb24gVEVYVCBOT1QgTlVMTCxcbiAgICAgICAgICAgIGN1cnJlbnRfZmxhZ3MgVEVYVCxcbiAgICAgICAgICAgIGN1cnJlbnRfY29uZmlkZW5jZSBSRUFMLFxuICAgICAgICAgICAgc2F2ZWRfYnkgVEVYVCxcbiAgICAgICAgICAgIHZlcnNpb24gSU5URUdFUiBERUZBVUxUIDEsXG4gICAgICAgICAgICBzYXZlZF9hdCBURVhUXG4gICAgICAgIClcbiAgICBgKTtcblxuICAgIC8vIEVuc3VyZSBjbGFpbV92ZXJzaW9ucyB0YWJsZSBleGlzdHNcbiAgICBhd2FpdCBkYkluc3RhbmNlLnJ1bihgXG4gICAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIGNsYWltX3ZlcnNpb25zIChcbiAgICAgICAgICAgIGlkIFRFWFQgUFJJTUFSWSBLRVksXG4gICAgICAgICAgICBjbGFpbV9kYl9pZCBURVhUIE5PVCBOVUxMLFxuICAgICAgICAgICAgdmVyc2lvbiBJTlRFR0VSIE5PVCBOVUxMLFxuICAgICAgICAgICAgZ2VvanNvbiBURVhUIE5PVCBOVUxMLFxuICAgICAgICAgICAgZmxhZ3MgVEVYVCxcbiAgICAgICAgICAgIGNvbmZpZGVuY2UgUkVBTCxcbiAgICAgICAgICAgIHNhdmVkX2J5IFRFWFQsXG4gICAgICAgICAgICBzYXZlZF9hdCBURVhULFxuICAgICAgICAgICAgRk9SRUlHTiBLRVkgKGNsYWltX2RiX2lkKSBSRUZFUkVOQ0VTIGNsYWltcyhpZClcbiAgICAgICAgKVxuICAgIGApO1xuXG4gICAgLy8gRW5zdXJlIGF1ZGl0X2xvZyB0YWJsZSBleGlzdHNcbiAgICBhd2FpdCBkYkluc3RhbmNlLnJ1bihgXG4gICAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIGF1ZGl0X2xvZyAoXG4gICAgICAgICAgICBpZCBURVhUIFBSSU1BUlkgS0VZLFxuICAgICAgICAgICAgYWN0aW9uIFRFWFQgTk9UIE5VTEwsXG4gICAgICAgICAgICB1c2VyX2lkZW50aWZpZXIgVEVYVCxcbiAgICAgICAgICAgIGlwX2FkZHJlc3MgVEVYVCxcbiAgICAgICAgICAgIHN1Y2Nlc3MgSU5URUdFUixcbiAgICAgICAgICAgIGRldGFpbHMgVEVYVCxcbiAgICAgICAgICAgIGNyZWF0ZWRfYXQgVEVYVFxuICAgICAgICApXG4gICAgYCk7XG5cbiAgICAvLyBFbnN1cmUgYW4gYWRtaW4gcmVjb3JkIGV4aXN0cyB3aXRoIGEgZGVmYXVsdCBwYXNzd29yZCBpZiBub25lIHNldFxuICAgIGF3YWl0IGVuc3VyZUFkbWluUGFzc3dvcmQoKTtcbiAgICByZXR1cm4gZGJJbnN0YW5jZTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlIGEgcXVlcnkgd2l0aCBwYXJhbWV0ZXJzIChTUUxpdGUgdmVyc2lvbilcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHF1ZXJ5PFQgPSBhbnk+KFxuICAgIHRleHQ6IHN0cmluZyxcbiAgICBwYXJhbXM/OiBhbnlbXVxuKTogUHJvbWlzZTx7IHJvd3M6IFRbXSB9PiB7XG4gICAgY29uc3QgZGIgPSBhd2FpdCBnZXREYigpO1xuXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgcm93cyA9IGF3YWl0IGRiLmFsbCh0ZXh0LCBwYXJhbXMgfHwgW10pO1xuICAgICAgICByZXR1cm4geyByb3dzIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignU1FMaXRlIHF1ZXJ5IGVycm9yOicsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxufVxuXG4vKipcbiAqIENsb3NlIGRhdGFiYXNlIGNvbm5lY3Rpb25cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNsb3NlRGIoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKGRiSW5zdGFuY2UpIHtcbiAgICAgICAgYXdhaXQgZGJJbnN0YW5jZS5jbG9zZSgpO1xuICAgICAgICBkYkluc3RhbmNlID0gbnVsbDtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBnZXREYixcbiAgICBxdWVyeSxcbiAgICBjbG9zZURiLFxuICAgIGVuc3VyZUFkbWluUGFzc3dvcmQsXG59O1xuXG4vKipcbiAqIEVuc3VyZSB0aGVyZSBpcyBhdCBsZWFzdCBvbmUgYWRtaW4gZW50cnkgd2l0aCBhIGRlZmF1bHQgcGFzc3dvcmQuXG4gKiBUaGlzIHJ1bnMgb24gc2VydmVyIHN0YXJ0LiBJZiBhbiBhZG1pbiBhbHJlYWR5IGV4aXN0cywgaXQgZG9lcyBub3RoaW5nLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZW5zdXJlQWRtaW5QYXNzd29yZCgpIHtcbiAgICBjb25zdCBkYiA9IGF3YWl0IGdldERiKCk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuZ2V0KCdTRUxFQ1QgQ09VTlQoKikgYXMgY291bnQgRlJPTSBhZG1pbicpO1xuICAgIGlmIChyZXN1bHQ/LmNvdW50ID09PSAwKSB7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRQYXNzd29yZCA9ICdhZG1pbjEyMyc7IC8vIHlvdSBjYW4gY2hhbmdlIHRoaXMgbGF0ZXJcbiAgICAgICAgY29uc3QgaGFzaGVkID0gYXdhaXQgYmNyeXB0Lmhhc2goZGVmYXVsdFBhc3N3b3JkLCAxMik7XG4gICAgICAgIGF3YWl0IGRiLnJ1bignSU5TRVJUIElOVE8gYWRtaW4gKGhhc2hlZF9wYXNzd29yZCwgY3JlYXRlZF9hdCwgdXBkYXRlZF9hdCkgVkFMVUVTICg/LCBkYXRldGltZShcIm5vd1wiKSwgZGF0ZXRpbWUoXCJub3dcIikpJywgW2hhc2hlZF0pO1xuICAgICAgICBjb25zb2xlLmxvZygn4pyFIERlZmF1bHQgYWRtaW4gcGFzc3dvcmQgc2V0IHRvIFwiYWRtaW4xMjNcIicpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJzcWxpdGUzIiwib3BlbiIsInBhdGgiLCJiY3J5cHQiLCJkYlBhdGgiLCJqb2luIiwicHJvY2VzcyIsImN3ZCIsImRiSW5zdGFuY2UiLCJnZXREYiIsImZpbGVuYW1lIiwiZHJpdmVyIiwiRGF0YWJhc2UiLCJydW4iLCJlbnN1cmVBZG1pblBhc3N3b3JkIiwicXVlcnkiLCJ0ZXh0IiwicGFyYW1zIiwiZGIiLCJyb3dzIiwiYWxsIiwiZXJyb3IiLCJjb25zb2xlIiwiY2xvc2VEYiIsImNsb3NlIiwicmVzdWx0IiwiZ2V0IiwiY291bnQiLCJkZWZhdWx0UGFzc3dvcmQiLCJoYXNoZWQiLCJoYXNoIiwibG9nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/dbSqlite.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/bcryptjs","vendor-chunks/sqlite"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgeo-ingest%2Froute&page=%2Fapi%2Fgeo-ingest%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgeo-ingest%2Froute.ts&appDir=%2FUsers%2Fvinaykumar%2FDesktop%2Fdss-atlas-digitalisation%2Fdss-atlas%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fvinaykumar%2FDesktop%2Fdss-atlas-digitalisation%2Fdss-atlas&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();